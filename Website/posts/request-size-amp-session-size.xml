<?xml version="1.0" encoding="utf-8"?>
<post>
  <title>Request size en session size</title>
  <slug>request-size-amp-session-size</slug>
  <author>Jan</author>
  <pubDate>2011-02-02 20:31:38</pubDate>
  <lastModified>2014-04-25 12:06:08</lastModified>
  <content>&lt;p&gt;Momenteel zit ben ik werkzaam bij een organisatie waar een ISA server als firewall dient en deze heeft een maximum ingesteld op de grootte van de Request Payload. Dit was tot voor kort geen probleem, totdat de ISA server werd geherconfigureerd.&lt;/p&gt; &lt;p&gt;De Request Payload is het stuk code dat de pagina van zichzelf doorstuurt naar een andere (of dezelfde) pagina. Dit is bijvoorbeeld de ViewState en alle controls en waarden binnen een form. Op een bepaalde pagina heel vaak een postback worden gedaan en iedere keer dat dit gebeurde werd de Request groter en groter. Immers, die viewstate wordt groter en alle controls met waarden worden meegestuurd. &lt;/p&gt; &lt;p&gt;Uiteraard wilde ik wel weten hoe groot de requests dan worden. Momenteel stond het limiet ingesteld op 5000 bytes. Dat klinkt wel als veel, maar ik heb er nooit bij stil gestaan hoe groot een request binnen ASP.NET nu eigenlijk normaal is.&lt;/p&gt; &lt;p&gt;Hiervoor heb ik het volgende stukje code maar in de footer van de masterpage binnen de applicatie toegevoegd:&lt;/p&gt; &lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;font face="Courier New"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font color="#0000ff"&gt;&lt;font style="font-size: 10pt"&gt;&amp;lt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;font style="font-size: 10pt"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font color="#a31515"&gt;asp&lt;/font&gt;&lt;/span&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font color="#0000ff"&gt;:&lt;/font&gt;&lt;/span&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font color="#a31515"&gt;Content&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font style="font-size: 10pt"&gt; &lt;span&gt;&lt;font color="#ff0000"&gt;ContentPlaceHolderID&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;="PlaceHolderFooter"&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#ff0000"&gt;ID&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;="ContentFooter"&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#ff0000"&gt;runat&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span&gt;&lt;font style="font-size: 10pt" color="#0000ff"&gt;="server"&amp;gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt; &lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;font face="Courier New"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;/font&gt;&lt;/span&gt;&lt;font style="font-size: 10pt"&gt;&lt;span style="font-family: "&gt;&lt;font color="#0000ff"&gt;&amp;lt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-family: "&gt;&lt;font color="#a31515"&gt;asp&lt;/font&gt;&lt;/span&gt;&lt;span style="font-family: "&gt;&lt;font color="#0000ff"&gt;:&lt;/font&gt;&lt;/span&gt;&lt;span style="font-family: "&gt;&lt;font color="#a31515"&gt;Literal&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-family: "&gt;&lt;font style="font-size: 10pt"&gt; &lt;span&gt;&lt;font color="#ff0000"&gt;ID&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;="PageFooterText"&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#ff0000"&gt;runat&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;="server"&lt;/font&gt;&lt;/span&gt; &lt;/font&gt;&lt;span&gt;&lt;font style="font-size: 10pt" color="#0000ff"&gt;/&amp;gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt; &lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: "&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;&lt;font color="#0000ff"&gt;&amp;lt;&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#a31515"&gt;asp&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;:&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#a31515"&gt;Literal&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#ff0000"&gt;ID&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;="PageRequestSize"&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#ff0000"&gt;runat&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;="server"&lt;/font&gt;&lt;/span&gt; &lt;/font&gt;&lt;span&gt;&lt;font style="font-size: 10pt" color="#0000ff"&gt;/&amp;gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;font face="Courier New"&gt;&lt;span style="font-family: "&gt;&lt;font color="#0000ff"&gt;&lt;font style="font-size: 10pt"&gt;&amp;lt;/&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;font style="font-size: 10pt"&gt;&lt;span style="font-family: "&gt;&lt;font color="#a31515"&gt;asp&lt;/font&gt;&lt;/span&gt;&lt;span style="font-family: "&gt;&lt;font color="#0000ff"&gt;:&lt;/font&gt;&lt;/span&gt;&lt;span style="font-family: "&gt;&lt;font color="#a31515"&gt;Content&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-family: "&gt;&lt;font style="font-size: 10pt" color="#0000ff"&gt;&amp;gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt; &lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&amp;nbsp;&lt;/p&gt; &lt;p&gt;En in de Page Load het volgende:&lt;/p&gt; &lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: nl; mso-fareast-font-family: calibri; mso-fareast-theme-font: minor-latin; mso-fareast-language: en-us; mso-bidi-language: ar-sa"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;PageRequestSize.Text = &lt;span&gt;&lt;font color="#0000ff"&gt;string&lt;/font&gt;&lt;/span&gt;.Format(&lt;span&gt;&lt;font color="#a31515"&gt;"Request size: {0} bytes"&lt;/font&gt;&lt;/span&gt;, Request.TotalBytes);&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&amp;nbsp;&lt;/p&gt; &lt;p&gt;Nu kon ik bij het bezoeken van de pagina’s gelijk zien hoe groot de requests eigenlijk waren.&lt;/p&gt; &lt;p&gt;Tot mijn verbazing kwam de grootte al binnen enkele kliks boven de 15.000 bytes uit, tot maximaal zo’n 38.000 bytes. Best grote requests!&lt;/p&gt; &lt;p&gt;Ook als ik de bron van de pagina bekeek zag ik dat de ViewState enorm groot was (na enkele postbacks). Hier zou behoorlijk wat winst op behaald kunnen worden door die te verkleinen. Het waren dan wel geen 35.000 tekens, maar zou toch voor een aanzienlijke verkleining van het request zorgen. Idealiter zou je hier een AJAX oplossing voor willen bouwen, zodat de pagina dynamisch wordt opgebouwd, maar dat valt natuurlijk niet binnen de scope van het huidige project. Misschien later nog eens.&lt;/p&gt; &lt;p&gt;Om de ViewState te verkleinen kwam ik al snel uit op de &lt;a href="http://msdn.microsoft.com/en-us/library/system.web.ui.sessionpagestatepersister.aspx"&gt;&lt;font face="Courier"&gt;SessionPageStatePersister&lt;/font&gt;&lt;/a&gt;. Door deze te gebruiken wordt de ViewState enorm verkleind, een voorbeeld is op deze link te vinden: &lt;a href="http://msdn.microsoft.com/en-us/library/aa479403.aspx"&gt;http://msdn.microsoft.com/en-us/library/aa479403.aspx&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Het enige dat je hiervoor hoeft te doen is het volgende stuk code toevoegen aan de pagina’s (of basepage natuurlijk):&lt;/p&gt;&lt;pre style="padding-bottom: 5px; line-height: normal; overflow-x: auto; overflow-y: auto; margin: 0px; padding-left: 5px; padding-right: 5px; font-family: ; word-wrap: break-word; word-break: break-all; padding-top: 5px"&gt;&lt;p&gt;&lt;font face="Consolas"&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;&lt;font style="font-size: 9.8pt"&gt;public&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;font style="font-size: 9.8pt"&gt; &lt;span&gt;&lt;font color="#0000ff"&gt;override&lt;/font&gt;&lt;/span&gt; PageStatePersister GetStatePersister() &lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face="Consolas"&gt;&lt;font style="font-size: 9.8pt"&gt;{
&lt;span&gt;&lt;font color="#0000ff"&gt;    return&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#0000ff"&gt;new&lt;/font&gt;&lt;/span&gt; SessionPageStatePersister(Page);
}&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;/pre&gt;
&lt;p&gt;Nadat dit is gedaan zal er alleen een referentie naar het Session object worden meegegeven in de request en de ViewState zelf zal dan in de sessie worden opgeslagen.&lt;/p&gt;
&lt;p&gt;Nadeel van deze oplossing is natuurlijk dat die enorme ViewState nu op de server wordt opgeslagen binnen het Sessie object. Gelukkig zijn er geen duizenden gebruikers die gebruik maken van deze web applicatie, maar toch vonden de beheerders het wel nuttig om te weten wat voor impact dit zou hebben op de server resources. Logisch natuurlijk.&lt;/p&gt;
&lt;p&gt;Omdat ik niet met zekerheid kon zeggen wat de exacte grootte van de ViewState binnen het sessie object zou worden moest ik dit dus onderzoeken. Het kan immers zo zijn dat de server hier compressie op uitoefent, de ViewState helemaal wordt uitgeschreven, of op een andere manier wordt opgeslagen binnen de sessie. Hiervoor moet ik dus de grootte van het sessie object zien te achterhalen. Hier kon ik niet een duidelijk antwoord op vinden, dus had ik maar bedacht om alle objecten binnen de sessie langs te lopen en de grootte er van op te vragen. Dit ging redelijk goed, echter zijn er managed objecten die niet geserializeerd willen worden, waardoor dit dus niet (ik weet tenminste niet hoe) kon bepalen hoe groot die waren.&lt;/p&gt;
&lt;p&gt;Uiteindelijk ben ik tot het volgende stuk code gekomen. Het werkt nog niet perfect, maar geeft in ieder geval een indruk van hoe groot de sessie ongeveer zou kunnen zijn. Er zijn objecten waarvan ik de grootte niet kan bepalen, dus die vallen jammergenoeg buiten de telling.&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;font face="Courier New"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font color="#0000ff"&gt;&lt;font style="font-size: 10pt"&gt;long&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font style="font-size: 10pt"&gt; size = 0;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;int&lt;/font&gt;&lt;/span&gt; nonSerializable = 0;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&lt;span&gt;&lt;font color="#0000ff"&gt;for&lt;/font&gt;&lt;/span&gt; (&lt;span&gt;&lt;font color="#0000ff"&gt;int&lt;/font&gt;&lt;/span&gt; i = 0; i &amp;lt; Session.Count; i++)&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;font face="Courier New"&gt;&lt;span style="font-family: "&gt;&lt;font style="font-size: 10pt"&gt;{&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font color="#0000ff"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; object&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font style="font-size: 10pt"&gt; o = &lt;span&gt;&lt;font color="#0000ff"&gt;new&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#0000ff"&gt;object&lt;/font&gt;&lt;/span&gt;();&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;&lt;font color="#0000ff"&gt;using&lt;/font&gt;&lt;/span&gt; (&lt;span&gt;&lt;font color="#2b91af"&gt;Stream&lt;/font&gt;&lt;/span&gt; s = &lt;span&gt;&lt;font color="#0000ff"&gt;new&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#2b91af"&gt;MemoryStream&lt;/font&gt;&lt;/span&gt;())&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;&lt;font color="#2b91af"&gt;BinaryFormatter&lt;/font&gt;&lt;/span&gt; formatter = &lt;span&gt;&lt;font color="#0000ff"&gt;new&lt;/font&gt;&lt;/span&gt; &lt;span&gt;&lt;font color="#2b91af"&gt;BinaryFormatter&lt;/font&gt;&lt;/span&gt;();&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;&lt;font color="#0000ff"&gt;var&lt;/font&gt;&lt;/span&gt; sessionItem = Session[i];&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;&lt;font color="#0000ff"&gt;if&lt;/font&gt;&lt;/span&gt; (sessionItem != &lt;span&gt;&lt;font color="#0000ff"&gt;null&lt;/font&gt;&lt;/span&gt;)&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;&lt;font color="#0000ff"&gt;var&lt;/font&gt;&lt;/span&gt; itemType = sessionItem.GetType();&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;span&gt;&lt;font style="font-size: 10pt" color="#0000ff"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; try&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; formatter.Serialize(s, sessionItem);&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; size += s.Length;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;&lt;font color="#0000ff"&gt;catch&lt;/font&gt;&lt;/span&gt; (&lt;span&gt;&lt;font color="#2b91af"&gt;SerializationException&lt;/font&gt;&lt;/span&gt;)&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; nonSerializable++;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: ; mso-ansi-language: en-gb" lang="EN-GB"&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;&lt;font color="#0000ff"&gt;int&lt;/font&gt;&lt;/span&gt; sizeMarshal = &lt;span&gt;&lt;font color="#2b91af"&gt;Marshal&lt;/font&gt;&lt;/span&gt;.SizeOf(sessionItem);&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;font face="Courier New"&gt;&lt;span style="font-family: "&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; size += sizeMarshal;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: "&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: "&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: "&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="line-height: normal; list-style-type: disc; margin: 0cm 0cm 0pt" class="MsoNormal"&gt;&lt;span style="font-family: "&gt;&lt;font face="Courier New"&gt;&lt;font style="font-size: 10pt"&gt;}&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Op deze manier weet ik ook van hoeveel objecten de grootte niet kon worden bepaald. Nadat ik deze code had gemaakt kreeg ik het bericht dat de Request Payload van de ISA zou worden verhoogd, dus al het uitzoekwerk was niet meer noodzakelijk. Toch heb ik er weer wat van opgestoken, dus was het een nuttige bugmelding.&lt;/p&gt;</content>
  <ispublished>true</ispublished>
  <categories></categories>
  <comments></comments>
</post>